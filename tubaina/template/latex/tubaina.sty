%%%%%%%%%%%%%%%%%%%%%%%%%%%% Tags Básicas %%%%%%%%%%%%%%%%%%%%%%%%%%%%

%Bold
\newcommand{\definition}[1]{\textbf{{#1}}}

%Italic
\newcommand{\italic}[1]{\textit{{#1}}}

%Underline
\newcommand{\underlined}[1]{\underline{{#1}}}

%CodeChunk
\newcommand{\codechunk}[1]{{\ttfamily {\small #1}}}

%Code and XMl and Java
\newcommand{\code}[1]{{\small \noindent \ttfamily #1}}

%Quotation
\newcommand{\chapterquote}[2]{
  \begin{flushright}
    \emph{#1} \\
    -- \small{#2}
  \end{flushright}}

%Link
\newcommand{\link}[1]{\url{#1}}
%Defining a link style
\urlstyle{rm}

%E-mail
\newcommand{\email}[2]{\href{mailto:#1@#2}{#1 em #2}}

%Unimportant section
\newcommand{\sectiontitle}[1]{\section*{#1}}

%Tag
\newcommand{\anchor}[1]{\glossary{#1}}

%Paragraph Spacing
\newcommand{\paragraphSpacer}{
	\linespread{1.0}
	\setlength{\parskip}{1.7ex plus 0.5ex minus 0.2ex}
}

%Box
\newcommand{\boxtag}[2]{
  \begin{flushright}
    \parbox{16cm}{
      \begin{tabular}{p{15.6cm}}
        \hline
        \rowcolor{lightgray}
        #1 \\
        \hline
      \end{tabular}
      \\[-1em]
      #2 \\[-1ex]
      \rule{16cm}{0.5pt}
    }
  \end{flushright}
}

\newcommand{\answerHead}[1]{
	\subsubsection*{#1\ -\ Exercises}
}

\newcommand{\instructornote}{
	Instructor's Note
}

\newcommand{\answerBooklet}{
	Exercises' Answers
}

\paragraphSpacer
%prevents margin overflow (because of long words)
\sloppy 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Reduced Caption
\newcommand{\reducedcaption}[1]{

 \vspace*{1mm}
 \begin{minipage}[b]{13cm}
   \caption{{#1}}
 \end{minipage}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%Colouring the Java Code in Latex

\usepackage{color}
%Java2TeX style definitions
%You can modify them to fit your needs
\newcommand{\jttstylea}{\color[rgb]{1.00,1.00,1.00}} %Background
\newcommand{\jttstyleb}{\color[rgb]{.501,.501,.501}} %Line numbers
\newcommand{\jttstylec}{\color[rgb]{.247,.498,.372}} %Multi-line comments
\newcommand{\jttstyled}{\color[rgb]{.247,.498,.372}} %Single-line comments
\newcommand{\jttstylee}{\color[rgb]{.498,.000,.333}} %Keywords
\newcommand{\jttstylef}{\color[rgb]{.164,.000,1.00}} %Strings
\newcommand{\jttstyleg}{\color[rgb]{.600,.000,.000}} %Character constants
\newcommand{\jttstyleh}{\color[rgb]{.600,.000,.000}} %Numeric constants
\newcommand{\jttstylei}{\color[rgb]{.000,.000,.000}} %Parenthesis
\newcommand{\jttstylej}{\color[rgb]{.498,.000,.333}} %Primitive Types
\newcommand{\jttstylek}{\color[rgb]{.000,.000,.000}} %Others
\newcommand{\jttstylel}{\color[rgb]{.498,.623,.749}} %Javadoc keywords
\newcommand{\jttstylem}{\color[rgb]{.498,.498,.623}} %Javadoc HTML tags
\newcommand{\jttstylen}{\color[rgb]{.247,.247,.749}} %Javadoc links
\newcommand{\jttstyleo}{\color[rgb]{.247,.372,.749}} %Javadoc others
\newcommand{\jttstylep}{\color[rgb]{1.00,.380,.000}} %Undefined
\newcommand{\jttstyleq}{\color[rgb]{.392,.392,.392}} %Annotation

%Xml2Tex style definitions
%by Lucas Cavalcanti
\newcommand{\texspecial}{\color[rgb]{.498,.498,.498}}
\newcommand{\texcomment}{\color[rgb]{.498,.000,.000}}
\newcommand{\texvalue}{\color[rgb]{.000,.498,.000}}
\newcommand{\texnormal}{\color[rgb]{.000,.000,.000}}
\newcommand{\texattrib}{\color[rgb]{.000,.000,.498}}
\newcommand{\textag}{\color[rgb]{.000,.000,.498}}

%%----------------------------------------------------------------------------
%% Algumas alteracoes sobre o tipo book.cls que prefiro.
%% Flavio Keidi Miyazawa.
%% Se vc tiver alguma sugestao interessante, envie para
%% keidi (at) ime.usp.br
%% Para cada nova alteracao, coloque identificacao.
%%
%% �ltima atualiza��o: 15/08/1997
%%


%%----------------------------------------------------------------------------
%%  (keidi)
%% Questao de estilo. Se uma pagina antes da entrada do capitulo for vazia,
%% faz com que ela nao contenha nem running head nem numeracao de pagina, ...
\newcommand{\clearemptydoublepage}{\newpage{\pagestyle{empty}\cleardoublepage}}


%%----------------------------------------------------------------------------
%%  (keidi)
%% 
%% Este environment e' igual `a declaracao de thebibliography em book.cls
%% com a excecao que este nao coloca em uppercase no mkboth.
%% Flavio Keidi Miyazawa
%%

\renewenvironment{thebibliography}[1]
     {\chapter*{\bibname
        \@mkboth{\bibname}{\bibname}}%
      \list{\@biblabel{\@arabic\c@enumiv}}%
           {\settowidth\labelwidth{\@biblabel{#1}}%
            \leftmargin\labelwidth
            \advance\leftmargin\labelsep
            \@openbib@code
            \usecounter{enumiv}%
            \let\p@enumiv\@empty
            \renewcommand\theenumiv{\@arabic\c@enumiv}}%
      \sloppy\clubpenalty4000\widowpenalty4000%
      \sfcode`\.\@m}
     {\def\@noitemerr
       {\@latex@warning{Empty `thebibliography' environment}}%
      \endlist}

%%----------------------------------------------------------------------------
%%  (keidi)
%% 
%% Este comando e' igual `a declaracao do comando \tableofcontents do book.cls
%% com a excecao que este nao coloca em uppercase no mkboth.
%% Flavio Keidi Miyazawa
%%
\newcommand\myname{Caelum Objects Tubaina}

%%----------------------------------------------------------------------------
%% These commands set the style for the Table of Contents

\renewcommand\tableofcontents{%
    \if@twocolumn
      \@restonecoltrue\onecolumn
    \else
      \@restonecolfalse
    \fi
    \chapter*{\contentsname
        \@mkboth{\contentsname}{\contentsname}}%
    \@starttoc{toc}%
    \if@restonecol\twocolumn\fi
    }

\newcommand\temporarytableofcontents{%
\ifnum \@ptsize=0  % 10pt
    \if@twocolumn
      \@restonecoltrue\onecolumn
    \else
      \@restonecolfalse
    \fi
    % colocar o meu nome e a data logo acima da linha do chapter*
    \chapter*{{\contentsname}\hfill \raisebox{19mm}[0pt][0pt]{\Large
      \myname \ \ \today}
        \@mkboth{\contentsname}{\contentsname}}%
    \@starttoc{toc}%
    \if@restonecol\twocolumn\fi 
\fi
\ifnum \@ptsize=1  % 11pt
    \if@twocolumn
      \@restonecoltrue\onecolumn
    \else
      \@restonecolfalse
    \fi
    % colocar o meu nome e a data logo acima da linha do chapter*
    \chapter*{{\contentsname}\hfill \raisebox{19mm}[0pt][0pt]{\Large
      \myname \ \ \today}
        \@mkboth{\contentsname}{\contentsname}}%
    \@starttoc{toc}%
    \if@restonecol\twocolumn\fi 
\fi
\ifnum \@ptsize=2  % 11pt
    \if@twocolumn
      \@restonecoltrue\onecolumn
    \else
      \@restonecolfalse
    \fi
    % colocar o meu nome e a data logo acima da linha do chapter*
    \chapter*{{\contentsname}\hfill \raisebox{32mm}[0pt][0pt]{\Large
      \myname \ \ \today}
        \@mkboth{\contentsname}{\contentsname}}%
    \@starttoc{toc}%
    \if@restonecol\twocolumn\fi 
\fi
}



%%----------------------------------------------------------------------------
%%  (keidi)
%% Este comando e' igual `a declaracao do comando \theindex do book.cls
%% com a excecao que este nao coloca em uppercase no mkboth.
%% Flavio Keidi Miyazawa
%%


\renewenvironment{theindex}
               {\if@twocolumn
                  \@restonecolfalse
                \else
                  \@restonecoltrue
                \fi
                \columnseprule \z@
                \columnsep 35\p@
                \twocolumn[\@makeschapterhead{\indexname}]%
                \@mkboth{\indexname}%
                        {\indexname}%
                \thispagestyle{plain}\parindent\z@
                \parskip\z@ \@plus .3\p@\relax
                \let\item\@idxitem}
               {\if@restonecol\onecolumn\else\clearpage\fi}



%%----------------------------------------------------------------------------
%%  (keidi)
%%  Aqui a modificacao foi para colocar as linhas e mudar tipo de letra de
%%  chapapp

\def\quadradocinza#1{%
  \rlap{\gray \vrule height 0.8cm width 1cm depth 0.2cm}%
  \rlap{\hbox to 1cm{\hss\mbox{\bfseries \white #1}\hss}}%
  \vrule height 0pt width 1cm depth 0pt}

\def\bloco#1{%
    \parindent \z@ \raggedright \normalfont
    \ifnum \c@secnumdepth >\m@ne
      \if@mainmatter
        \hfill \large{\sc \@chapapp} \Huge {\quadradocinza{\thechapter}}
        \par\nobreak
        %\vskip 4\p@
        \hrule
        \hrule
        \vskip 20\p@
      \fi
    \fi
    \interlinepenalty\@M
    \Huge \bfseries #1\par\nobreak
    \vskip 20\p@
}
    
\def\@makechapterhead#1{%
\ifnum \@ptsize=0  % 10pt
  \vspace*{0\p@}{\bloco{#1}}
\fi
\ifnum \@ptsize=1  % 11pt
  \vspace*{0\p@}{\bloco{#1}}
\fi
\ifnum \@ptsize=2  % 12pt
  \vspace*{0\p@}{\bloco{#1}}
\fi
}


%%----------------------------------------------------------------------------
%%  (keidi)
%%  Aqui a modificacao foi para colocar as linhas em chapter*
\def\@makeschapterhead#1{%
  \ifnum \@ptsize=0
  \vspace*{83.5\p@}%
  \hrule
  \hrule
  \vspace*{20\p@}%
  {\parindent \z@ \raggedright
    \normalfont
    \interlinepenalty\@M
    \Huge \bfseries  #1\par\nobreak
    \vskip 40\p@
  }
\fi
  \ifnum \@ptsize=1 
  \vspace*{83.8\p@}%
  \hrule
  \hrule
  \vspace*{20\p@}%
  {\parindent \z@ \raggedright
    \normalfont
    \interlinepenalty\@M
    \Huge \bfseries  #1\par\nobreak
    \vskip 40\p@
  }
\fi
  \ifnum \@ptsize=2
  \vspace*{92.5\p@}%
  \hrule
  \hrule
  \vspace*{20\p@}%
  {\parindent \z@ \raggedright
    \normalfont
    \interlinepenalty\@M
    \Huge \bfseries  #1\par\nobreak
    \vskip 40\p@
  }
\fi
}
%%----------------------------------------------------------------------------
%%   (Caelum)
%%
%% Removing the page number from the first page of each chapter
%% * npn stands for no page numbering

\renewcommand{\npnchapter}[1]{\thispagestyle{empty}\chapter{#1}}



%%----------------------------------------------------------------------------
%%  (keidi)
%%  Mudando o (Sumario) (padrao no [brazil/babel]) para (�ndice) e 
%%          o (�ndice) para (�ndice Remissivo)
%%
\addto\captionsbrazil{%
\def\indexname{\'Indice Remissivo}%
\def\contentsname{\'Indice}%
}%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%Section%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\makeatletter
\def\section{\@ifstar\unnumberedsection\numberedsection}
\def\numberedsection{\@ifnextchar[%]
  \numberedsectionwithtwoarguments\numberedsectionwithoneargument}
\def\unnumberedsection{\@ifnextchar[%]
  \unnumberedsectionwithtwoarguments\unnumberedsectionwithoneargument}
\def\numberedsectionwithoneargument#1{\numberedsectionwithtwoarguments[#1]{#1}}
\def\unnumberedsectionwithoneargument#1{\unnumberedsectionwithtwoarguments[#1]{#1}}
\def\numberedsectionwithtwoarguments[#1]#2{%
  \ifhmode\par\fi
  \removelastskip
  \vskip 3ex\goodbreak
  \refstepcounter{section}%
  \vbox{%
    \hrule height 1pt depth 0pt width \hsize
    \hbox to \hsize{%
      \begin{tabular}{p{\hsize}}
        \advance \hsize by -4.2mm
        \rowcolor{lightgray}
        \parindent=0pt
        \vspace*{-2mm}
        \bfseries\Large\thesection - #2
      \end{tabular}
%      \psboxit{box 1 .8 .8 setrgbcolor fill}{%
%        \vbox{%
%          \hbox to \hsize{%
%            \hbox to 1cm{\hss\bfseries\Large\thesection.\ }%
%            \vtop{%
%              \advance \hsize by -1cm
%              \parindent=0pt
%              \leavevmode\raggedright\bfseries\Large
%              \raisebox{2pt}{\strut}%
%              \raisebox{-2pt}{\strut}%
%              #2
%              }}%
%          }}}%
    }}\nobreak
  \vskip 2mm\nobreak
  \addcontentsline{toc}{section}{%
    \protect\numberline{\thesection}%
    #1}%
  \ignorespaces
  \sectionmark{#1}%
  }
\def\unnumberedsectionwithtwoarguments[#1]#2{%
  \ifhmode\par\fi
  \removelastskip
  \vskip 3ex\goodbreak
%  \refstepcounter{section}%
  \vbox{%
    \hrule height 1pt depth 0pt width \hsize
    \hbox to \hsize{%
      \begin{tabular}{p{\hsize}}
        \advance \hsize by -4.2mm
        \rowcolor{lightgray}
        \parindent=0pt
        \vspace*{-2mm}
        \bfseries\Large #2
      \end{tabular}
%      \psboxit{box 1 .8 .8 setrgbcolor fill}{%
%        \vbox{%
%
%          \hbox to \hsize{%
%          \hbox to 1cm{\hss\bfseries\Large\thesection.\ }%
%            \vtop{%
%            \advance \hsize by -1cm
%              \parindent=0pt
%              \leavevmode\raggedright\bfseries\Large
%              \raisebox{2pt}{\strut}%
%              \raisebox{-2pt}{\strut}%
%              #2
%              }}%
%          }}}%
    }}\nobreak
  \vskip 2mm\nobreak
%  \addcontentsline{toc}{section}{%
%    \protect\numberline{\thesection}%
%    #1}%
  \ignorespaces
  }
\makeatother

% Ruby2TeX definitions
% by Luiz Real
\newcommand{\rubycomment}{\color[rgb]{.247,.498,.373}} %Comments
\newcommand{\rubykeyword}{\color[rgb]{.643,.208,.478}} %Keywords
\newcommand{\rubystring}{\color[rgb]{.165,.000,1.00}} %Strings
\newcommand{\rubysymbol}{\color[rgb]{1.00,.251,.251}} %Symbols
\newcommand{\rubynumber}{\color[rgb]{.000,.502,1.00}} %Numbers
\newcommand{\rubynormal}{\color[rgb]{.000,.000,.000}} %Others
\newcommand{\rubyregexp}{\color[rgb]{.353,.118,.627}} %Regular expressions
\newcommand{\rubyconstant}{\color[rgb]{.000,.000,.000}} %Constants
\newcommand{\rubyvariable}{\color[rgb]{.000,.251,.502}} %Variables
\newcommand{\rubyglobal}{\color[rgb]{1.00,.000,.000}} % Global variables
\newcommand{\rubyexecution}{\color[rgb]{.000,.502,.502}} %System commands